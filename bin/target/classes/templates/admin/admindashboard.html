<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
	  <th:block th:include="adminfragment/headerlibs.html :: headerlibs"></th:block> 
	</head>

    <body class="fixed-left">
        <!-- Begin page -->
        <div id="wrapper">
        
            <!-- Top Bar Start -->
           <header th:insert="adminfragment/header.html :: header"> </header>
            <!-- Top Bar End -->


            <!-- ========== Left Sidebar Start ========== -->
		    <nav th:insert="adminfragment/sidenav.html :: sidevav"> </nav> 
            <!-- Left Sidebar End --> 


            <!-- Start right Content here -->                  
            <div class="content-page">
                <!-- Start content -->
                <div class="content">
                    <div class="container">

                        <!-- Page-Title -->
                        <div class="row">
                            <div class="col-sm-12">
                                <h4 class="pull-left page-title">Dashboard</h4>
                                <ol class="breadcrumb pull-right">
                                    <li><a href="/admin">Home</a></li>
                                    <li class="active"><a href="/admin">Dashboard</a></li>
                                </ol>
                            </div>
                        </div>

                        <!-- Start Widget -->
              <div th:if="${usertypeid_role[0] =='PPVFRA Admin' || usertypeid_role[0] =='Super Administrator'}"> 
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-lg-4">
                                <div class="mini-stat clearfix bx-shadow">
                                    <span class="mini-stat-icon bg-purple"><i class="ion-android-contacts"></i></span>
                                    <div class="mini-stat-info text-right text-muted">
                                       <!--  <span class="counter" th:text="${company_total_count}" ></span> -->
                                       <a th:href="@{/getcompany}"><span class="counter" th:text="${company_total_count}" ></span></a>
                                        Company
                                    </div>
                                    <div class="tiles-progress">
                                        <div class="m-t-20">
                                            <h5 class="text-uppercase">Company <span class="pull-right"></span></h5>
                                            <div class="progress progress-sm m-0">
                                                <div class="progress-bar progress-bar-purple" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 col-sm-6 col-lg-4">
                                <div class="mini-stat clearfix bx-shadow">
                                    <span class="mini-stat-icon bg-success"><i class="ion-android-contacts"></i></span>
                                    <div class="mini-stat-info text-right text-muted">
                                        <!-- <span class="counter" th:text="${institute_total_count}" ></span> -->
                                        <a th:href="@{/getinstitution}"><span class="counter" th:text="${institute_total_count}" ></span></a>
                                        Institutions
                                    </div>
                                    <div class="tiles-progress">
                                        <div class="m-t-20">
                                            <h5 class="text-uppercase">Institutions <span class="pull-right"></span></h5>
                                            <div class="progress progress-sm m-0">
                                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 col-sm-6 col-lg-4">
                                <div class="mini-stat clearfix bx-shadow">
                                    <span class="mini-stat-icon bg-primary"><i class="ion-android-contacts"></i></span>
                                    <div class="mini-stat-info text-right text-muted">
                                        <!-- <span class="counter" th:text="${applicant_total_count}"></span> -->
                                        <a th:href="@{/getuserapplication}"><span class="counter" th:text="${applicant_total_count}" ></span></a>
                                        Applicants
                                    </div>
                                    <div class="tiles-progress">
                                        <div class="m-t-20">
                                            <h5 class="text-uppercase">Applicants <span class="pull-right"></span></h5>
                                            <div class="progress progress-sm m-0">
                                                <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="57" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <!-- End row-->

                        <div class="row">
                            <div class="col-lg-4">
                                <div class="portlet"><!-- /portlet heading -->
                                    <div class="portlet-heading">
                                        <h3 class="portlet-title text-dark text-uppercase">
                                            Company
                                        </h3>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div id="portlet1" class="panel-collapse collapse in">
                                        <div class="portlet-body">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div id="company-id" style="position: relative;height: 320px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> <!-- /Portlet -->
                            </div> <!-- end col -->

                            <div class="col-lg-4">
                                    <div class="portlet"><!-- /portlet heading -->
                                        <div class="portlet-heading">
                                            <h3 class="portlet-title text-dark text-uppercase">
                                                Institutions
                                            </h3>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div id="portlet1" class="panel-collapse collapse in">
                                            <div class="portlet-body">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div id="institutions-id" style="position: relative;height: 320px;"></div>
                                                        
                                                    </div>
                                                  
                                                </div>
                                            </div>
                                        </div>
                                    </div> <!-- /Portlet -->
                                </div> <!-- end col -->

                                <div class="col-lg-4">
                                        <div class="portlet"><!-- /portlet heading -->
                                            <div class="portlet-heading">
                                                <h3 class="portlet-title text-dark text-uppercase">
                                                    Applicants
                                                </h3>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div id="portlet1" class="panel-collapse collapse in">
                                                <div class="portlet-body">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div id="applicants-id" style="position: relative;height: 320px;"></div>
                                                            
                                                        </div>
                                                      
                                                    </div>
                                                </div>
                                            </div>
                                        </div> <!-- /Portlet -->
                                    </div> <!-- end col -->
                                    
                                    
                                    <div class="col-lg-12">
                                        <div class="portlet"><!-- /portlet heading -->
                                            <div class="portlet-heading">
                                                <h3 class="portlet-title text-dark text-uppercase">
                                                    Applications
                                                </h3>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div id="portlet1" class="panel-collapse collapse in">
                                                <div class="portlet-body">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div id="applications-id" style="position: relative;height: 420px;"></div>
                                                            
                                                        </div>
                                                      
                                                    </div>
                                                </div>
                                            </div>
                                        </div> <!-- /Portlet -->
                                    </div> <!-- end col -->

                        </div> <!-- End row -->
                        
                </div>
      <!---------- MAIN DIV ENDS FOR ROLE CHECK HERE ------ -->        
                        <!-- After the display of chaarts -->
                  <div th:if="${usertypeid_role[0] =='Company'}">
			      
			       <div class="col-lg-4 col-md-4 col-xs-12 well">
			
			<div class="row">
					<div class="portlet-title text-dark text-uppercase"><h4>Applicants Details</h4></div>	
				<form>
			<div class="col-sm-12">
				<div class="row">
	
		<div class="col-sm-12 form-group">
				<label  class="col-sm-7 font_weight_form company_position_set">New </label>
				<!-- <span class="mini-stat-icon bg-pink color_bg"><a href="viewnewmanu?status=TmV3&amp;roleId=NA==">45</a></span>
			 -->
		 
			 <span class="mini-stat-icon1 bg-blue"><a href="/view_details_applicants/New"><span  th:text="${count_new}"></span></a></span>
			 </div>
	
	
			
			<div class="col-sm-12 form-group">
					<label class="col-sm-7 font_weight_form company_position_set">Accepted</label>
					<span class="mini-stat-icon1 bg-green"><a href="/view_details_applicants/Accepted"><span th:text="${count_accepted}"></span></a></span>
			</div>
	
				<div class="col-sm-12 form-group">
						<label class="col-sm-7 font_weight_form company_position_set">Rejected</label>
					<span class="mini-stat-icon1 bg-orange"><a href="/view_details_applicants/Rejected"><span th:text="${count_rejected}"></span></a></span>
				</div>
				
			
					<!-- 
					<div class="col-sm-12 form-group">
							<label class="col-sm-7 font_weight_form">Active</label>
						<span class="mini-stat-icon1 bg-purple" th:text="${count_active}"><a href=""></a></span>
					</div> 
					-->
				
					</div>
				
						
						<br>
						
						
						</div>
			
								
							</form>
						 
					</div>
					
					
				</div>
				</div>
				
				
				
				
		 <div th:if="${usertypeid_role[0] =='Institution'}">
			     		
				
				<div class="col-lg-4 col-md-4 col-xs-12 well">
			
			<div class="row">
					<div class="portlet-title text-dark text-uppercase"><h4>Applicant Details</h4></div>	
				<form>
			<div class="col-sm-12">
				<div class="row">
	
		<div class="col-sm-12 form-group">
				<label  class="col-sm-7 font_weight_form company_position_set">New </label>
				<!-- <span class="mini-stat-icon bg-pink color_bg"><a href="viewnewmanu?status=TmV3&amp;roleId=NA==">45</a></span>
			 -->
		 
			 <span class="mini-stat-icon1 bg-blue"><a href="/view_details_institution/New"><span  th:text="${ins_count_new}"></span></a></span>
			 </div>
	
	
			
			<div class="col-sm-12 form-group">
					<label class="col-sm-7 font_weight_form company_position_set">Accepted</label>
					<span class="mini-stat-icon1 bg-green"><a href="/view_details_institution/Accepted"><span th:text="${ins_count_accepted}"></span></a></span>
			</div>
	
				<div class="col-sm-12 form-group">
						<label class="col-sm-7 font_weight_form company_position_set">Rejected</label>
					<span class="mini-stat-icon1 bg-orange"><a href="/view_details_institution/Rejected"><span th:text="${ins_count_rejected}"></span></a></span>
				</div>
				
			
					<!-- 
					<div class="col-sm-12 form-group">
							<label class="col-sm-7 font_weight_form">Active</label>
						<span class="mini-stat-icon1 bg-purple" th:text="${count_active}"><a href=""></a></span>
					</div> 
					-->
				
					</div>
				
						
						<br>
						
						
						</div>
			
								
							</form>
						 
					</div>
					
					
				</div>
				
			</div>	
			
			
			
				

                    </div> <!-- container -->
                               
                </div> <!-- content -->

			<!-- start footer content here -->
			<div th:replace="adminfragment/footer.html :: footer"></div>
			<!-- end footer content here -->

            </div>
       
        </div>
        <!-- END wrapper -->

<!-- footer lib start here-->

<div th:replace="adminfragment/footerlibs.html :: footerlibs"></div>
<!-- end footer lib -->
<script src="/dashboard/js/echarts/echarts.min.js"></script>
        <script type="text/javascript" th:inline="javascript">
            // Company start
            var chart1 = document.getElementById('company-id');
            var myChart1 = echarts.init(chart1);
            option = {
                legend: {
                    x: 'center',
                    data: ["New", "Accepted","Rejected"]
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} "
                },
                calculable : true,
                series : [
                    {
                        name:'Company',
                        type:'pie',
                        radius : '45%',
                        center: ['50%', '60%'],
                        data:[
                            {value:[[${company_count_new}]],itemStyle:{normal:{color:"#72aae4"}},name:'New'},
                            {value:[[${company_count_accepted}]],itemStyle:{normal:{color:"#3e7205"}},name:'Accepted'},
                            {value:[[${company_count_rejected}]],itemStyle:{normal:{color:"#f77809"}},name:'Rejected'}
                        ]
                    }
                ]
            };

            myChart1.setOption(option, true);
            
            myChart1.on('click', function (param){
                console.log(param)    ;   
                var name=param.name;
                if(name=="New"){
                    window.location.href="/getcompany/New";
                }else if(name=="Accepted"){
                    window.location.href="/getcompany/Accepted";
                }else if(name=="Rejected"){
                    window.location.href="/getcompany/Rejected";
                }else{
                    //window.location.href="https://nus.com.sg";
                }
            });
            // Company end 

            // Company start
            var chart2 = document.getElementById('institutions-id');
            var myChart2 = echarts.init(chart2);
            option = {
                legend: {
                    x: 'center',
                    data: ["New", "Accepted","Rejected"]
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} "
                },
                calculable : true,
                series : [
                    {
                        name:'Institutions',
                        type:'pie',
                        radius : '45%',
                        center: ['50%', '60%'],
                        data:[
                            {value:[[${institution_count_new}]],itemStyle:{normal:{color:"#72aae4"}},name:'New'},
                            {value:[[${institution_count_accepted}]],itemStyle:{normal:{color:"#3e7205"}},name:'Accepted'},
                            {value:[[${institution_count_rejected}]],itemStyle:{normal:{color:"#f77809"}},name:'Rejected'}
                        ]
                    }
                ]
            };

            myChart2.setOption(option, true);
            myChart2.on('click', function (param){
                console.log(param)    ;   
                var name=param.name;
                if(name=="New"){
                    window.location.href="/getinstitution/New";
                }else if(name=="Accepted"){
                    window.location.href="/getinstitution/Accepted";
                }else if(name=="Rejected"){
                    window.location.href="/getinstitution/Rejected";
                }else{
                    //window.location.href="https://nus.com.sg";
                }
            });
            
            // applicants start
            var chart3 = document.getElementById('applicants-id');
            var myChart3 = echarts.init(chart3);
            option = {
                legend: {
                    x: 'center',
                    data: ["New", "Accepted","Rejected"]
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} "
                },
                calculable : true,
                series : [
                    {
                        name:'Applicants',
                        type:'pie',
                        radius : '45%',
                        center: ['50%', '60%'],
                        data:[
                            {value:[[${applicant_count_new}]],itemStyle:{normal:{color:"#72aae4"}},name:'New'},
                            {value:[[${applicant_count_accepted}]],itemStyle:{normal:{color:"#3e7205"}},name:'Accepted'},
                            {value:[[${applicant_count_rejected}]],itemStyle:{normal:{color:"#f77809"}},name:'Rejected'}
                        ]
                    }
                ]
            };

            myChart3.setOption(option, true);
            myChart3.on('click', function (param){
                console.log(param)    ;   
                var name=param.name;
                if(name=="New"){
                    window.location.href="/getuserapplication/New";
                }else if(name=="Accepted"){
                    window.location.href="/getuserapplication/Accepted";
                }else if(name=="Rejected"){
                    window.location.href="/getuserapplication/Rejected";
                }
            });
            
            // Company start
            var chart = document.getElementById('applications-id');
            var myChart = echarts.init(chart);
            option = {
                legend: {
                    x: 'center',
                    data: ["New", "Accepted","Rejected",'Submitted','Application Closed','Application Withdrawn','Certificate to be issued']
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} "
                },
                calculable : true,
                series : [
                    {
                        name:'Applications',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:[[${application_count_new}]],itemStyle:{normal:{color:"#72aae4"}},name:'New'},
                            {value:[[${application_count_accepted}]],itemStyle:{normal:{color:"#3e7205"}},name:'Accepted'},
                            {value:[[${application_count_rejected}]],itemStyle:{normal:{color:"#f77809"}},name:'Rejected'},
                            {value:[[${application_count_submitted}]],name:'Submitted'},
                            {value:[[${application_count_closed}]],name:'Application Closed'},
                            {value:[[${application_count_withdrawn}]],name:'Application Withdrawn'},
                            {value:[[${application_count_cert_issued}]],name:'Certificate to be issued'},
                        ]
                    }
                ]
            };

            myChart.setOption(option, true);
            
            myChart.on('click', function (param){
                console.log(param)    ;   
                var name=param.name;
                if(name=="New"){
                    window.location.href="/applicationstatus/New";
                }else if(name=="Accepted"){
                    window.location.href="/applicationstatus/Accepted";
                }else if(name=="Rejected"){
                    window.location.href="/applicationstatus/Rejected";
                }else if(name=="Submitted"){
                    window.location.href="/applicationstatus/Submitted";
                }else if(name=="Application Closed"){
                    window.location.href="/applicationstatus/Application Closed";
                }else if(name=="Application Withdrawn"){
                    window.location.href="/applicationstatus/Application Withdrawn";
                }else if(name=="Certificate to be issued"){
                    window.location.href="/applicationstatus/Certificate to be issued";
                } 
            });
        </script>    
    </body>
</html>