<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="transfer_seeds_to_mts">

<span th:if="${TransferSeedsToMTS != null && TransferSeedsToMTS == 'TransferSeedsToMTS' }"> 
 
 <form class="form-horizontal" role="form" th:action="@{/transferseedtomts}" th:object="${transferseedtomts}" method="post" id="form_transfer" name="form_transfer" onsubmit = "return validatetransfer();">  
		<div class="panel panel-success">
			<div class="panel-heading">Transfer seeds to MTS</div>
			<div class="panel-body">
				
			<div class="form-group">
            <label class="col-md-2 control-label" > </label>
            <div class="col-md-10">
			<input type="text" id="applicationid" th:name="applicationid"  th:value="${applicationid}" readonly="readonly" hidden="true" />
            </div>
            </div>
				<div class="form-group">
					<label class="col-md-3 control-label">Date of Transfer to MTS <span style="color:red">*</span></label>
					<div class="col-md-9">
						<input type="date" id="mts_seed_transfer_date" th:field="*{seed_transfer_date}" class="form-control">
						<span id="mts_seed_transfer_date_error" style="color:red"></span>
					</div>
				</div>
				
				<div class="form-group">
					<label class="col-md-3 control-label">Cell/Location <span style="color:red">*</span></label>
					<div class="col-md-9">
						<input type="text" id="mtd_cell_location" th:field="*{cell_location}" class="form-control">
						<span id="mtd_cell_location_error" style="color:red"></span>
					</div>
				</div>
				
				<div class="form-group">
					<label class="col-md-3 control-label">Transfer by <span style="color:red">*</span></label>
					<div class="col-md-9">
						<select th:field="*{transfer_by}" class="form-control" id="mts_transfer_by">
							<option th:value="-1">Select</option>
							<option th:value="2">value1</option>
						</select>
						<span id="mts_transfer_by_error" style="color:red"></span>
					</div>
				</div>
				
				<div class="form-group">
					<label class="col-md-3 control-label">Seed status <span style="color:red">*</span></label>
					<div class="col-md-9">
						<select th:field="*{seed_status}" class="form-control" id="mts_seeds_status">
							<option th:value="-1">Select</option>
							<option th:value="3">value2</option>
						</select>
						<span id="mts_seeds_status_error" style="color:red"></span>
					</div>
				</div>
				
				
				<div class="form-group">
					<div class="table-responsive col-sm-12">
						<table class="table table-striped  table-bordered table-hover">
							<!--Table head-->
						<thead>
							<tr></tr>
						</thead>
						<!--Table head-->
					
						<!--Table body-->
						<tbody>
							
							<tr class="table-info">
							<td>Line Type <span style="color:red">*</span></td>
							<td th:if="${hybridtrue == 1}"> 
							<select th:field="*{type_line}" class="form-control" name="type_line" id="type_line" th:onchange="'typelinetransfermts(\''+${applicationid}+'\',this)'">
						    <option th:value="-1" >Select</option>
				            <option th:each="dropDownItem : ${TypeLine}"
				               th:value="${dropDownItem.id}"
				               th:text="${dropDownItem.code}" />
				        	</select>
				        	<span id="type_lineerror" style="color:red"></span>
						  
						  	</td>
						  	
						  	<td th:unless="${hybridtrue == 1}"> 
							<select th:field="*{type_line}" class="form-control" name="type_line" id="type_line" th:onchange="'typelinetransfermts(\''+${applicationid}+'\',this)'">
						    <option th:value="-1" >Select</option>
				            <option th:each="dropDownItem : ${typeline11}"
				               th:value="${dropDownItem[0]}"
				               th:text="${dropDownItem[1]}" />
				        	</select>
				        	
						  	</td>
						  	
							</tr>
							
							<tr class="table-info">
								<td>Moisture % <span style="color:red">*</span></td>
								<td><input type="text" th:field="*{moisture_ptg}" class="form-control" name="denomination" id="mts_denomination">
								<span id="mts_denomination_error" style="color:red"></span>
								</td>
							</tr>
							
							<tr class="table-info">
								<td>Germination % <span style="color:red">*</span></td>
								<td><input type="text" th:field="*{germination_ptg}" class="form-control"  name="quantity" id="mts_quantity">
								<span id="mts_quantity_error" style="color:red"></span>
								</td>
							</tr>
							
							<tr class="table-info">
								<td>Purity % <span style="color:red">*</span></td>
								<td><input type="text" th:field="*{purity_ptg}" class="form-control"  name="place" id="mts_place">
								<span id="mts_place_error" style="color:red"></span>
								</td>
							</tr>
							</tbody>
							</table>
							</div>
						</div> 
						
						<div class="form-group">
							<label class="col-md-3 control-label">Remarks <span style="color:red">*</span></label>
							<div class="col-md-9">
								<textarea th:field="*{remarks}" class="form-control" id="mtsremarks_seed"></textarea>
								<span id="mtsremarks_seed_error" style="color:red"></span>
							</div>
						</div>
						
						
						<div class="form-group m-b-0">
							<label class="col-md-3 control-label">&nbsp;</label>
							<div class="col-sm-7">
							<span th:if="${role_granted != 'Super Administrator' && role_granted != 'PPVFRA Admin'}">
							<span th:if="${sub12 == 'addpresent'}">
								<button type="submit" class="btn btn-info waves-effect waves-light" onclick="return mts_validate();">Save</button>
							</span>
							</span>
							</div>
							
						</div>
						<br>    
						
						
						
						
						<div class="table-responsive col-sm-12">
			<div class="panel-heading"><strong>SAVED DETAILS</strong></div>
			
				<table  class="table table-striped  table-bordered table-hover">
			
			<thead>
				<tr>
			     	<th>S.No</th>
			     	<th>Date of Transfer to MTS</th>
			     	<th>Cell/Location</th>
			     	<th>Transfer by</th>
			     	<th>Seed status</th>
					<th>Line Type</th>
				    <th>Moisture %</th>
				    <th>Germination %</th>
				    <th>Purity %</th>
					<th>Action</th>
				</tr>
			</thead>
									
			<tbody>
				 <tr class="table-info" th:each="data,serial : ${transferseedtomtsdetails}">
				<td th:text="${serial.count}"></td>
				<td th:text="${#dates.format((data[2]),'yyyy-MM-dd')}"></td>
				<td th:text="${data[3]}"></td>
				<td th:text="${data[4]}"></td>
				<td th:text="${data[5]}"></td>
				<td th:text="${data[6]}"></td>
				<td th:text="${data[7]}"></td>
				<td th:text="${data[8]}"></td>
				<td th:text="${data[9]}"></td>
				<td><a th:href="@{'/edittransferseedtomts/'+${data[0]}+'/'+${applicationid}}">Edit</a></td>
				
				</tr> 
				<tr></tr>
			</tbody>
			</table> 
			</div>
						
						
						
						
					</div>
				</div>
				
				 <script type = "text/javascript">
      function validatetransfer() {
    	 // alert(document.getElementById("type_line").value);
    	  if( document.form_transfer.type_line.value == "-1") 
    	  {
    		 document.getElementById("type_lineerror").innerHTML="Please select typeline";
               document.getElementById("type_line").focus() ;
               return false;
            } 
    	  if( document.form_transfer.mts_denomination.value == "") 
    	  {
    		 document.getElementById("mts_denomination_error").innerHTML="please enter moisture";
               document.getElementById("mts_denomination").focus() ;
               return false;
            } 
    	  if( document.form_transfer.mts_quantity.value == "") 
    	  {
    		 document.getElementById("mts_quantity_error").innerHTML="Please enter germination";
               document.getElementById("mts_quantity").focus() ;
               return false;
            } 
    	  if( document.form_transfer.mts_place.value == "") 
    	  {
    		 document.getElementById("mts_place_error").innerHTML="Please enter purity";
               document.getElementById("mts_place").focus() ;
               return false;
            } 
    	  if( document.form_transfer.mtsremarks_seed.value == "") 
    	  {
    		 document.getElementById("mtsremarks_seed_error").innerHTML="Please enter remarks";
               document.getElementById("mtsremarks_seed").focus() ;
               return false;
            }
    	  
    	     return true;
    	}
      </script>
      
  <script type="text/javascript"  th:inline="javascript">
   var dataval = [[${dataintab_rejuv}]];
	function typelinetransfermts(Obj,that){
// $(that).closest('form').find('input[type=submit]').attr("disabled", false);
   $(that).closest('form').find(':submit').attr("disabled", false);
   
    var typelinedata= document.getElementById("type_line");
    var response1 =null;
  	//DOES NOT WORK
  	//var text= typelinedata.options[typelinedata.selectedIndex].text;
    //ENDS
  	//var selected = $(that).val();
  
    var selected = $(that).closest('form').find("#type_line").val();

    //	var selected = $(that).closest('form').find("#type_line  option:selected").text();
	var text=selected;
  
 
   
    if(Obj != null)		 
      	$.ajax({
              type: "POST",
              url: "/ppvfra/getdatasaved_fortransfermts",
              data:Obj,
              success: function (response) {

            	for(var k=0; k< response.length ; k++)
            		{
            	//alert(""+k);
            		var a = response[k][10];
            		if(text == a)
            			{
            			alert("Value Already Exists.Please Select another Field Or Edit The Value Present in Table.");
            			/*  $("#submitseedmodal").attr("disabled", true); */
            			$(that).closest('form').find(':submit').attr("disabled", true);
            			//curElement.closest('form').find(':submit');
            			return false;
            			}
            		 
            			
            		}
          	},
            failure: function (response) {
            alert(response.responseText);
        },
        error: function (response) {
            alert(response.responseText);
        }
      	});           
         
    
                  
    
}
</script>
      <script>
      function mts_validate(){
    	  if( document.getElementById("mts_seed_transfer_date").value =="") {
           	 document.getElementById("mts_seed_transfer_date_error").innerHTML="Please enter date of transfer to mts";
           	 document.getElementById("mts_seed_transfer_date").focus() ;
               return false;
            }
            else{
         	   document.getElementById("mts_seed_transfer_date_error").innerHTML="";
            }
    	  if( document.getElementById("mtd_cell_location").value =="") {
         	 document.getElementById("mtd_cell_location_error").innerHTML="Please enter cell location";
         	 document.getElementById("mtd_cell_location").focus() ;
             return false;
          }
          else{
       	   document.getElementById("mtd_cell_location_error").innerHTML="";
          }
     
		   if( document.getElementById("mts_transfer_by").value =="-1") {
	     	 document.getElementById("mts_transfer_by_error").innerHTML="Please select transfer by";
	     	 document.getElementById("mts_transfer_by").focus() ;
	         return false;
	      }
	      else{
	   	   document.getElementById("mts_transfer_by_error").innerHTML="";
	      } 
	  
		 if( document.getElementById("mts_seeds_status").value =="-1") {
		     	 document.getElementById("mts_seeds_status_error").innerHTML="Please select seed status ";
		     	 document.getElementById("mts_seeds_status").focus() ;
		         return false;
		      }
		      else{
		   	   document.getElementById("mts_seeds_status_error").innerHTML="";
		      } 
		 return( true );
      }
      </script>
			</form>
</span>
<span th:unless="${TransferSeedsToMTS != null && TransferSeedsToMTS == 'TransferSeedsToMTS' }">
 <label>YOU ARE NOT AUTHORISED TO VIEW THIS PAGE.PLEASE CONTACT ADMINISTRATOR</label>
 </span>

</div>
</html>