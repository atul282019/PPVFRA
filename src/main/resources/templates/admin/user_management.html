  
  <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
	  <th:block th:include="adminfragment/headerlibs.html :: headerlibs"></th:block> 
	</head>

    <body class="fixed-left">
        <!-- Begin page -->
        <div id="wrapper">
        
            <!-- Top Bar Start -->
           <header th:insert="adminfragment/header.html :: header"> </header>
            <!-- Top Bar End -->


            <!-- ========== Left Sidebar Start ========== -->
			<header th:insert="adminfragment/sidenav.html :: sidevav"> </header>
            <!-- Left Sidebar End --> 

  
            <!-- Start right Content here -->  
                         
           <!-- ============================================================== -->                      
            <div class="content-page">
                <!-- Start content -->
                <div class="content">
                    <div class="container">

                        <!-- Page-Title -->
                        <div class="row">
                            <div class="col-sm-12">
                                <h4 class="pull-left page-title">User Management</h4>
                                <ol class="breadcrumb pull-right">
                                    <li><a href="/admin">Home</a></li>
                                    <li class="active">User Management</li>
                                    <li>
                                        <a href="/addnewuser" class="btn btn-purple waves-effect waves-light btn-xs m-b-5"><b>Add User</b></a>
                                    </li>
                                </ol>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">User List</h3>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                             <div class="table-responsive">
                                            <div th:if="${actd_viewtrue != null && actd_viewtrue == 'valpresent' }">
											
                                                <table id="internal_usr_mgmt" class="table table-hover table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th>S.No</th>
                                                            <th>Name</th>
                                                            <th>Username</th>
                                                            <th>Email</th>
                                                            <th>Contact Number</th> 
                                                            <th>Is Active</th>
                                                            <span th:each="sec_chk : ${actd}">
														     <span th:if="${sec_chk == 'Edit'}">
														     <th>Action</th>
														     </span>
														     </span>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                       
                                                            <tr th:each="usershow,increment : ${internal}">
                                                            <td th:text=${increment.count}></td>
                                                            <td> 
                                                           <span th:if="${usershow.lastname == null && usershow.middlename == null }" th:text="${usershow.firstname}">
                                                            </span>
                                                            <span th:unless="${usershow.lastname == null && usershow.middlename == null }">
                                                            
                                                            <span th:if="${usershow.lastname != null && usershow.middlename != null}" th:text="${usershow.firstname+' '+usershow.middlename+' '+usershow.lastname}">
                                                            </span>
                                                            <span th:unless="${usershow.lastname != null && usershow.middlename != null}">
                                                            
                                                            <span th:if="${usershow.lastname != null && usershow.middlename == null}" th:text="${usershow.firstname+' '+usershow.lastname}">
                                                            </span>
                                                            <span th:unless="${usershow.lastname != null && usershow.middlename == null}" th:text="${usershow.firstname+' '+usershow.middlename}">
                                                            </span>
                                                            
                                                            </span>
                                                            
                                                            </span>
                                                            </td>
                                                             <!-- <span th:if="${usershow.lastname != null}" th:text="${usershow.firstname+' '+usershow.lastname}">
                                                            </span>
                                                             -->
                                                            <td th:text="${usershow.username}"></td>
                                                            <td th:text="${usershow.email}"></td>
                                                            <td th:text="${usershow.mobile_number}"></td>
                                                            <td th:text="${usershow.isactive}"></td>
                                                            <span th:each="sec_chk : ${actd}">
														     <span th:if="${sec_chk == 'Edit'}">
                                                            <td>
                                                            <a class="btn btn-success btn-xs" th:href="@{'/edituser/'+${usershow.id}}">Edit</a>
                                                            <a class="btn btn-success btn-xs" th:href="@{'/resetpassword/'+${usershow.id}}">Reset Password</a>
                                                            </td>
                                                            </span>
                                                            </span>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                </div>
                                                <span th:unless="${actd_viewtrue != null && actd_viewtrue == 'valpresent' }">
												<label>YOU ARE NOT AUTHORISED TO VIEW THIS PAGE.PLEASE CONTACT ADMINISTRATOR</label>
												</span>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- End Row -->


                    </div> <!-- container -->
                               
                </div> <!-- content -->

                <!-- <footer class="footer text-right">
                    2019 © PPVFRA.
                </footer>
 
            </div>-->
            <!-- ============================================================== -->
           
            <!-- End Right content here -->
          <div th:replace="adminfragment/footer.html :: footer"></div>
           </div> <!-- container -->
                               
                <!-- content -->

			<!-- start footer content here -->
			
			<!-- end footer content here -->

      
        <!-- END wrapper -->

<!-- footer lib start here-->

<div th:replace="adminfragment/footerlibs.html :: footerlibs"></div>
</div>
<!-- end footer lib -->
<!--     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
   <div th:if="${message != null}">
 <div id="myModal1" class="modal fade">
   <div class="modal-dialog">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <div class="modal-content">
         <div class="modal-body">
				<p align="center" th:text="${message}" />
            </div>
        </div>
    </div>
</div>
</div>

    <script type="text/javascript">
	      $(document).ready(function(){
		  $("#myModal1").modal('show');
	     });
        </script>   
    
    </body>
</html>